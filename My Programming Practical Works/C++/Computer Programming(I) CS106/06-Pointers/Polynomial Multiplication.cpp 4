// Polynomial multiplication
#include <iostream>
using namespace std;

// product = multiplicand * multiplier
void multiplication(long long int* multiplicandCoef, long long int* multiplicandExpon, int multiplicandSize,
    long long int* multiplierCoef, long long int* multiplierExpon, int multiplierSize,
    long long int*& productCoef, long long int*& productExpon, int& productSize);

// addend += adder
void addition(long long int*& addendCoef, long long int*& addendExpon, int& addendSize,
    long long int* adderCoef, long long int* adderExpon, int adderSize);

// returns true if and only if the specified polynomial is the zero polynomial
bool isZero(long long int* coefficient, int size);

// outputs the specified polynomial
void output(long long int* coefficient, long long int* exponent, int size);

int main()
{
    int T;
    cin >> T;
    for (int t = 0; t < T; t++)
    {
        int multiplicandSize;
        cin >> multiplicandSize; // input multiplicand
        long long int* multiplicandCoef = new long long int[multiplicandSize]();
        long long int* multiplicandExpon = new long long int[multiplicandSize]();
        for (int i = multiplicandSize - 1; i >= 0; i--)
            cin >> multiplicandCoef[i];
        for (int i = multiplicandSize - 1; i >= 0; i--)
            cin >> multiplicandExpon[i];

        int multiplierSize;
        cin >> multiplierSize; // input multiplier
        long long int* multiplierCoef = new long long int[multiplierSize]();
        long long int* multiplierExpon = new long long int[multiplierSize]();
        for (int i = multiplierSize - 1; i >= 0; i--)
            cin >> multiplierCoef[i];
        for (int i = multiplierSize - 1; i >= 0; i--)
            cin >> multiplierExpon[i];

        int productSize;
        long long int* productCoef;
        long long int* productExpon;
        // product = multiplicand * multiplier
        multiplication(multiplicandCoef, multiplicandExpon, multiplicandSize,
            multiplierCoef, multiplierExpon, multiplierSize,
            productCoef, productExpon, productSize);

        output(productCoef, productExpon, productSize);

        delete[] multiplicandCoef;
        delete[] multiplicandExpon;
        delete[] multiplierCoef;
        delete[] multiplierExpon;
        delete[] productCoef;
        delete[] productExpon;
    }
}

// product = multiplicand * multiplier
void multiplication(long long int* multiplicandCoef, long long int* multiplicandExpon, int multiplicandSize,
    long long int* multiplierCoef, long long int* multiplierExpon, int multiplierSize,
    long long int*& productCoef, long long int*& productExpon, int& productSize)
{
    long long int *adderCoef = new long long int[multiplierSize]();
    long long int *adderExpon = new long long int[multiplierSize]();
    int adderSize = 0;
//
    productSize = 0;
    productCoef = new long long int[multiplicandSize * multiplierSize]();
    productExpon = new long long int[multiplicandSize * multiplierSize]();
//
    for (int i = 0; i < multiplicandSize; i++) {
        adderSize = 0;
        for (int j = 0; j < multiplierSize; j++) {
            adderCoef[j] = multiplicandCoef[i] * multiplierCoef[j];
            adderExpon[j] = multiplicandExpon[i] + multiplierExpon[j];
            adderSize++;
        }
        addition(productCoef, productExpon, productSize,
            adderCoef, adderExpon, adderSize);
    }
}
// addend += adder
void addition(long long int*& addendCoef, long long int*& addendExpon, int& addendSize,
              long long int* adderCoef, long long int* adderExpon, int adderSize)
{
    int i = 0, j = 0, sumSize = 0;
    long long int *sumCoef = new long long int [addendSize + adderSize]();
    long long int *sumExpon = new long long int [addendSize + adderSize]();
    while (i < addendSize && j < adderSize) {
        if (addendExpon[i] > adderExpon[j]) {
            sumCoef[sumSize] = adderCoef[j];
            sumExpon[sumSize] = adderExpon[j];
            j++;
            sumSize++;
        }
        else if (addendExpon[i] < adderExpon[j]) {
            sumCoef[sumSize] = addendCoef[i];
            sumExpon[sumSize] = addendExpon[i];
            i++;
            sumSize++;
        }
        else {
            if (addendCoef[i] + adderCoef[j] != 0) {
                sumCoef[sumSize] = addendCoef[i] + adderCoef[j];
                sumExpon[sumSize] = addendExpon[i];
                sumSize++;
            }
                i++;
                j++;
        }
    }
    while (i < addendSize) {
        sumCoef[sumSize] = addendCoef[i];
        sumExpon[sumSize] = addendExpon[i];
        i++;
        sumSize++;
    }
    while (j < adderSize) {
        sumCoef[sumSize] = adderCoef[j];
        sumExpon[sumSize] = adderExpon[j];
        j++;
        sumSize++;
    }
//
    for (int i = 0; i < sumSize; i++) {
        addendCoef[i] = sumCoef[i];
        addendExpon[i] = sumExpon[i];
    }
    addendSize = sumSize;
//
}

// returns true if and only if the specified polynomial is the zero polynomial
bool isZero(long long int* coefficient, int size)
{
    return (size == 1 && coefficient[0] == 0);
}

// outputs the specified polynomial
void output(long long int* coefficient, long long int* exponent, int size)
{
    cout << size << endl;
    cout << coefficient[size - 1];
    for (int i = size - 2; i >= 0; i--)
        cout << " " << coefficient[i];
        cout << endl;

    cout << exponent[size - 1];
    for (int i = size - 2; i >= 0; i--)
        cout << " " << exponent[i];
        cout << endl;
}
